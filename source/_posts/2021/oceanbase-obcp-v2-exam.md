---
title: "OceanBase OBCP 考试经验小结"
date: 2021-12-13 20:50:10
categories: [oceanbase,obcp]
tags: [oceanbase,obcp,ob v2,observer,exam]
author: 严少安
thumbnail: "/img/oceanbase/oceanbase-banner.png"
---

## 考证经历

年底手头工作基本告一段落，恰好遇到恩墨做[秒杀活动](https://www.modb.pro/db/181718)，于是当机立断决定报名（11/30报名），然后就开始了为期12天的备考，这里说明一下，如果打算报名OBCP的小伙伴请先参加[OBCA认证考试](https://www.oceanbase.com/training/detail?level=OBCA)，今天（12/13考试）5点起床赶路去省城参加考试（这里有点小曲折，报名之前没搞清楚有哪些考点可以选择，报考时才发现最近的考点竟然在400多公里之外）。还好，最后的结果如同计划一切完美，路途畅通、考试顺利、心情愉悦。

## 考试经验

于我个人而言，这次能够顺利通过OBCP考试，最大的助力莫过于恩墨提供的完备培训资料，以及微信答疑群里李老师和各位大神的指点。

由于大环境所限，这次课程只能通过在线视频课程的形式学习以及自学恩墨老师重新梳理过的PPT，当然OB官网的产品资料和KB也是强烈建议学习的，官网的产品文档版本我参考的是[v2.2.77版本](https://www.oceanbase.com/docs/oceanbase-database/oceanbase-database/V2.2.77/product-updates)，KB不是很多大体也都翻阅了一遍。

在备考过程中，我认为不仅要学习理论知识，还需要在学习过程中切实动手操练，比如我在学习的过程中在本地虚拟机搭建了一个OB最小原型，将PPT里的概念转化为动手实践的结果集，边学习边实践，边学习边总结，如此才能将每个知识点理解透彻，而非留于理论字面，这也是我有信心报名、能通过考试的秘笈所在。

此外，在学习OceanBase的过程中，墨天轮上还有一些文章也给予我一定的启发，感兴趣的同学可以搜关键字：OceanBase、OBCP。

下面我将心得笔记重点部分呈现如下，以供大家参考，如若有误烦请批评指正：

|课程章节| 重点笔记                                                                                                                                           |
|---|------------------------------------------------------------------------------------------------------------------------------------------------|
|1.1 OceanBase 云主机创建| port -- 8080(OCP), 2881(OBServer), 2882(启动OBServer使用的端口), 2883(OBProxy)                                                                        |
|1.2 OceanBase 部署环境准备| OceanBase容忍的集群内时钟偏差 / 保证所有节点的时钟偏差在 100ms 以内；方案：选择 OCP 服务器作为 NPT server, 其它所有 oceanbase 服务器作为 NTP client；安装介质->动手安装一遍                           |
|1.3 OceanBase 云平台安装部署| 黑屏登录方式（用户名的几种格式）                                                                                                                               |
|1.4 OCP 部署 OceanBase 集群| 分区是OceanBase数据架构的基本单元；自动负载均衡：主副本均匀打散到各个服务器中，使得各个服务器都能承载业务流量。（必须打开自动负载均衡的场景）；每个 Zone 会提供两种服务：总控服务（RootService）和分区服务（PartitionService）。（核心作用分别是） |
|1.5 OBproxy 配置与租户创建| 创建租户三个步骤；相关系统表                                                                                                                                 |
|2.1 OB 基本概念与租户创建流程| 认真理解系统架构概念图                                                                                                                                    |
|2.2 OB 分布式架构高级技术| primary zone 优先级;表组                                                                                                                            |
|3.1 内存管理| 内存结构总体结构；MemStore、KVCache                                                                                                                      |
|3.2 内存数据落盘策略 合并与转储| OceanBase数据库内部IO的单位；合并触发方式、策略、机制；合并、转储对比，相关参数                                                                                                  |
|4.1 SQL 请求执行流程| 流程图；快速参数化；计划缓存                                                                                                                                 |
|4.2 DML DDL 语言处理与查询改写| 查询改写；改写类型                                                                                                                                      |
|4.3 执行计划 与 执行计划缓存| 左深树；执行计划缓存；(g)v$plan_cache_plan_explain                                                                                                        |
|4.4 分区表| 几种分区方式、限制、分区键                                                                                                                                  |
|4.5 索引| 路径选择；局部vs全局；主键vs分区键                                                                                                                            |
|4.6 Hint与SQL性能监控| 几种用法汇总；(g)v$sql_audit                                                                                                                          |
|5.1 全局快照及分布式一致性读| GTS；全局一致性快照                                                                                                                                    |
|5.2 分布式两阶段提交| 与标准2PC差异、改进；宕机异常处理；分布式事务调优方法                                                                                                                   |
|6 OBProxy| 核心功能；连接方式；部署方式；路由实现；常用命令、配置项                                                                                                                   |
|7 OB 备份与恢复| 存储介质；备份粒度                                                                                                                                      |
|8.1 基础参数与变量设置| OB系统配置项、OB系统变量(与时间相关的变量)                                                                                                                       |
|8.2 日常运维操作| 服务停止；故障节点替换                                                                                                                                    |
|8.3 数据库监控| 集群级事件（记录集群级事件，如major freeze, 合并，server 上下线，修改primary_zone引发的切主操作、负载均衡任务执行等，保留最近7天历史）；慢SQL（查看慢日志的两种方法）；outline绑定                                |
|8.4 常见异常处理| 合并和转储较慢，如何处理，相关配置项                                                                                                                             |
|8.5 灾难恢复| 回收站（mysql/oracle模式的不同；租户级别、会话级别；清除方法）；闪回查询（mysql/oracle模式的不同）；undo_tetention                                                                   |


另附成绩单一份：

<img src="https://oss-emcsprod-public.modb.pro/image/editor/20211213-c8a7c096-2898-481a-9543-c83256694c58.png" referrerpolicy="no-referrer"/>


最后，感谢强大的祖国，清晨伴日升出门，傍晚天黑前回家，一天内轻松奔走800多公里路，这是我10年前上大学时不敢想象的事情。  


---
https://www.modb.pro/db/197751
https://enmoedu.com/portal.php?mod=view&aid=58
[2021-12-16, OBCP之路丨严少安：“12天备考拿下OBCP证书”](https://mp.weixin.qq.com/s?__biz=Mzk0OTI2NjAyMQ==&mid=2247490393&idx=1&sn=663b7b31698182193b8c8f8992c30d6e)
